
## ç’°å¢ƒ
- [x] OS: Ubuntu-22.04LTS(WSL2)  
- [x] miniconda3
- [x] Python: ~~3.8~~ â†’ æ™®é€šã«pythonã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å…¥ã‚ŒãŸæ–¹ãŒã„ã„
- [x] GPU: NVIDIA GeForce RTX 3070Ti Laptop GPU
- [x] NVIDIA-SMI: 555.52.01
- [x] Driver Version: 555.99
- [x] CUDA: 12.5

## ROS2 install
- [ROS2 å…¬å¼](https://docs.ros.org/en/humble/Installation/Alternatives/Ubuntu-Development-Setup.html)
- [[ros2 install]]
- [[ROS2 delete and reinstall]]
### ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹

- [ ] ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œæˆï¼†ãƒ“ãƒ«ãƒ‰
```bash
$ cd
$ mkdir -p ros2_ws/src
$ cd ros2_ws
$ sudo rosdep init
$ rosdep update
$ source /opt/ros/humble/setup.bash
$ colcon build
```

ãƒŸã‚¹ã£ã¦ã‚‹å¯èƒ½æ€§å¤§

## Rasberry pi 4Bã®OSæ›¸ãç›´ã—
- [ ] [RPI-imager](https://www.raspberrypi.com/software/)
```bash
$ sudo apt install rpi-imager
```

### Imaging driver
# ğŸ“Œ Raspberry Piï¼šã‚«ãƒ¡ãƒ© & ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ç”¨ãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢è¨­å®šï¼ˆæ—¥æœ¬èªã¾ã¨ã‚ï¼‰

## 1. OS ã®æ›¸ãè¾¼ã¿ï¼ˆRaspberry Pi Imagerï¼‰
![[Screenshot from 2025-12-02 15-36-00.png]]

1. [x] **Raspberry Pi Imager**ã§æœ€æ–°ã® 64bit Raspberry Pi OS ã‚’æ›¸ãè¾¼ã‚€  
    OS ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºç”»é¢ã§ä»¥ä¸‹ã‚’è¨­å®šï¼š

    - [x] ãƒ›ã‚¹ãƒˆåï¼š`imaging.local`
    - [x] ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼š`pi`
    - [x] ä»»æ„ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
    - [x] WiFi è¨­å®š
    - [x] ãƒ­ã‚±ãƒ¼ãƒ«è¨­å®šï¼ˆã“ã‚Œã‚’è¨­å®šã—ãªã„ã¨ WiFi ãŒç„¡åŠ¹åŒ–ã•ã‚Œã‚‹)

2. [x] **Services** ã‚¿ãƒ–ã§ä»¥ä¸‹ã‚’æœ‰åŠ¹åŒ–ï¼š
    - [x] `Enable SSH`
    - [x] `Use password authentication`


3. [ ] æ›¸ãè¾¼ã¿å¾Œã€Raspberry Pi ã‚’èµ·å‹•ã—ã€PC ã¨ **Ethernet ã§æ¥ç¶š**  
    PC å´ã® IPv4 ã‚’ **Link-Local Only** ã«è¨­å®š  
    â†’ `ssh pi@imaging.local` ã§ãƒ­ã‚°ã‚¤ãƒ³å¯èƒ½


---

## 2. ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

- [ ] ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãªã—ãªã‚‰è¿½åŠ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä¸è¦ã€‚

1. [x] èµ·å‹•å¾Œã€PC ã‹ã‚‰ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ Pi ã«ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ï¼š
```bash
$ bash bash_scripts/sync_code_to_pi.sh
```

2. [x] Pi ã¸æ¥ç¶šï¼š
```bash
ssh pi@imaging.local
cd imaging_driver
sudo bash install.sh
```

ã“ã‚Œã§ã€**èµ·å‹•æ™‚ã«è‡ªå‹•ã§ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãŒé–‹å§‹ã™ã‚‹ systemd ã‚µãƒ¼ãƒ“ã‚¹**ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€‚

---

## 3. ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã‚’ä½¿ã†å ´åˆï¼ˆä»»æ„ï¼‰

- [ ] ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚‚é…ä¿¡ã™ã‚‹å ´åˆã¯ã€Pi ä¸Šã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼ˆã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆãŒå¿…è¦ï¼‰ï¼š
```bash
sudo apt-get install python3-pyaudio
```

---

## 4. ãƒ­ãƒœãƒƒãƒˆã‚¹ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å‘ã‘ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®š

- [x] Pi ä¸Šã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®šãƒ„ãƒ¼ãƒ«èµ·å‹•ï¼š
```bash
sudo nmtui
```

- [x] `Edit a connection` â†’ `Wired Connection` ã‚’ç·¨é›†  
    - [x] `IPv4 Configuration`ï¼š**Link-Local**
    - [x] `IPv6 Configuration`ï¼š**Disabled**

---

## 5. RPi ã‚«ãƒ¡ãƒ©ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ« v3ï¼ˆimx708ï¼‰ã®ä½¿ç”¨

- [ ] V3 ã‚«ãƒ¡ãƒ©ãŒèªè­˜ã•ã‚Œãªã„å ´åˆã®ç¢ºèªï¼š

1. [x] ã‚«ãƒ¡ãƒ©ä¸€è¦§ã‚’ç¢ºèªï¼š
```bash
libcamera-hello --list-cameras
```

2. [ ] èªè­˜ã•ã‚Œã¦ã„ãªã„å ´åˆã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†ï¼š
```bash
sudo nano /boot/firmware/config.txt
```

- [ ] `camera_auto_detect=0` ã‚’ **1 ã«å¤‰æ›´**
- [ ] `[all]` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ä»¥ä¸‹ã‚’è¿½åŠ ï¼š

### Raspberry Pi 5 ã®å ´åˆï¼ˆ2ãƒãƒ¼ãƒˆæœ‰ã‚Šï¼‰

- [ ] `dtoverlay=imx708,cam1`  # cam1 ã« v3 ã‚«ãƒ¡ãƒ©
- [ ] `dtoverlay=ov5647,cam0`  # cam0 ã« v1 ã‚«ãƒ¡ãƒ©

### Pi 4 ä»¥å‰ï¼ˆ1ãƒãƒ¼ãƒˆã®ã¿ï¼‰ã®å ´åˆ

- [x] `dtoverlay=imx708`

---

## 6. ï¼ˆä»»æ„ï¼‰V3 ã‚«ãƒ¡ãƒ©ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ WDR æœ‰åŠ¹åŒ–

WDR = åºƒãƒ€ã‚¤ãƒŠãƒŸãƒƒã‚¯ãƒ¬ãƒ³ã‚¸ï¼ˆHDR ã®ã‚ˆã†ãªåŠ¹æœï¼‰

1. [ ] ã‚«ãƒ¡ãƒ©ã®ãƒ‡ãƒã‚¤ã‚¹åã‚’ç¢ºèªï¼š
```bash
v4l2-ctl -d /dev/v4l-subdev0 -l
```

- [ ] `wide_dynamic_range` ã‚’å«ã‚€ãƒ‡ãƒã‚¤ã‚¹ä¾‹ï¼š`/dev/v4l-subdev5`

2. [ ] WDR ã® ON / OFF

### ONï¼ˆæœ‰åŠ¹åŒ–ï¼‰
```bash
v4l2-ctl --set-ctrl wide_dynamic_range=1 -d /dev/v4l-subdev5
```

### OFFï¼ˆç„¡åŠ¹åŒ–ï¼‰
```bash
v4l2-ctl --set-ctrl wide_dynamic_range=0 -d /dev/v4l-subdev5
```

---

## GPU(å†)
- [x] ä¸€å¿œ[NVIDIA-HP Drivers](https://www.nvidia.com/ja-jp/drivers/)ã§æ¤œç´¢  
  nvidia-driver-580
- [x] ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
$ sudo add-apt-repository ppa:graphics-drivers/ppa
$ sudo apt update
$ sudo apt install nvidia-driver-580
## pass: hayashi-dell
$ sudo reboot
```
- [x] ç¢ºèª
```bash
$ nvidia-smi
```